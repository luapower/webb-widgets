<!DOCTYPE html>
<html>
<head>
<title>X-MODULE</title>
<meta charset="utf-8">
<style>

html, body {
	position: relative;
	margin: 0;
	height: 100%;
	display: grid;
	overflow: hidden;
}

* { box-sizing: border-box; }

@font-face {
	font-family: "x-widget";
	src: url("/OpenSans-Regular.ttf");
}

@font-face {
	font-family: "x-widget";
	src: url("/OpenSans-SemiBold.ttf");
	font-weight: bold;
}

@font-face {
	font-family: "x-widget-condensed";
	src: url("/OpenSansCondensed-Bold.ttf");
	font-weight: bold;
}
</style>

<link rel="stylesheet" type="text/css" href="fontawesome.css">
<link rel="stylesheet" type="text/css" href="x-widgets.css">

<script src="ace/ace.js"></script>

<script src="glue.js"></script>
<script src="divs.js"></script>
<script src="ajax.js"></script>
<script src="url.js"></script>
<script src="x-widgets.js"></script>
<script src="x-nav.js"></script>
<script src="x-listbox.js"></script>
<script src="x-grid.js"></script>
<script src="x-cssgrid.js"></script>
<script src="xmodule.js"></script>

</head>

<body>
<script>

//DEBUG_EVENTS = true
//DEBUG_ATTACH_TIME = true

// ---------------------------------------------------------------------------
// main app
// ---------------------------------------------------------------------------

allow_editing = true

document.body.on('keydown', function(key, shift, ctrl) {
	if (key == 's' && ctrl) {
		xmodule.save()
		return false
	}
})

let prop_layers = {
	base_dba    : 'dba',
	base        : 'lma',
	base_server : 'lma-server',
	lang2       : 'lma-lang-it',
	lang        : 'lma-lang-ro',
	user        : 'lma-user-admin',
	dev         : 'lma-user-cosmin',
}

let prop_layer_slots = {}

for (let k in prop_layers)
	prop_layer_slots[k] = null

xmodule = xmodule({
	prop_layer_slots: prop_layer_slots,
	prop_layer_slot_colors: {
		base_server: '#000',
		lang: '#f66',
		lang2: '#f69',
		user: '#99f',
		dev: '#33a',
	},
})

for (let slot of keys(prop_layers).reverse())
	xmodule.set_prop_layer(slot, prop_layers[slot], null, null, false)

root_widget = null
root_widget = component.create('lma1')
document.body.add(root_widget)

document.on('keydown', function(key) {
	if (key == 'F9')
		show_toolboxes('toggle')
})

//show_toolboxes()


</script>
</body>
</html>
